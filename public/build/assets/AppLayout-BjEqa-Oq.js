import{c as x,r as d,j as e,L as c,a as u}from"./app-D7WWf1gE.js";function f(){const{auth:i}=x().props,{url:n}=x(),[s,t]=d.useState(!1),a=[{name:"Dashboard",href:"/dashboard",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{name:"My Files",href:"/files",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})},{name:"Shared",href:"/shares",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}],o=[{name:"Manage Users",href:"/admin/users",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}],l=r=>n.startsWith(r);return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t(!s),className:"lg:hidden fixed top-4 left-4 z-50 p-2.5 rounded-xl bg-card shadow-lg border border-border/50 hover:bg-gray-50 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),s&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black/40 backdrop-blur-sm fade-in",onClick:()=>t(!1)}),e.jsx("aside",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-card border-r border-border transform transition-transform duration-300 ease-out ${s?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 px-6 py-6 border-b border-border",children:[e.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-primary to-primary-hover rounded-xl flex items-center justify-center shadow-lg shadow-primary/25",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("span",{className:"text-xl font-bold text-primary-dark tracking-tight",children:"CloudVault"})]}),e.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-1.5 overflow-y-auto",children:[a.map(r=>e.jsxs(c,{href:r.href,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${l(r.href)?"bg-primary text-white shadow-md shadow-primary/25":"text-text-secondary hover:bg-gray-50 hover:text-text-primary"}`,children:[r.icon,e.jsx("span",{className:"font-medium",children:r.name})]},r.name)),i.user?.isAdmin&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-6 pb-3 px-4",children:e.jsx("p",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Admin"})}),o.map(r=>e.jsxs(c,{href:r.href,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${l(r.href)?"bg-primary text-white shadow-md shadow-primary/25":"text-text-secondary hover:bg-gray-50 hover:text-text-primary"}`,children:[r.icon,e.jsx("span",{className:"font-medium",children:r.name})]},r.name))]})]}),e.jsx("div",{className:"px-4 py-5 border-t border-border",children:e.jsxs(c,{href:"/password",className:"flex items-center gap-3 px-4 py-3 rounded-xl text-text-secondary hover:bg-gray-50 hover:text-text-primary transition-all duration-200",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"font-medium",children:"Settings"})]})})]})})]})}function j({trigger:i,children:n,align:s="right",width:t="w-48"}){const[a,o]=d.useState(!1),l=d.useRef(null);d.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const r={left:"left-0",right:"right-0",center:"left-1/2 -translate-x-1/2"};return e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("div",{onClick:()=>o(!a),children:i}),a&&e.jsx("div",{className:`absolute z-50 mt-2 ${t} ${r[s]} bg-card rounded-xl shadow-xl border border-border/80 py-1.5 slide-up`,children:e.jsx("div",{onClick:()=>o(!1),children:n})})]})}function m({onClick:i,children:n,danger:s=!1,disabled:t=!1}){return e.jsx("button",{onClick:i,disabled:t,className:`w-full px-4 py-2.5 text-left text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${s?"text-error hover:bg-red-50":"text-text-primary hover:bg-gray-50"}`,children:n})}function g(){return e.jsx("div",{className:"my-1.5 border-t border-border"})}function v({title:i}){const{auth:n}=x().props,s=()=>{u.post("/logout")},t=a=>{if(!a)return"?";const o=a.split(" ");return o.length>=2?(o[0][0]+o[1][0]).toUpperCase():a.substring(0,2).toUpperCase()};return e.jsx("header",{className:"sticky top-0 z-30 bg-card/90 backdrop-blur-md border-b border-border/80",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("h1",{className:"text-xl font-semibold text-text-primary lg:ml-0 ml-12",children:i})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(j,{trigger:e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-primary to-primary-hover rounded-xl flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-sm font-semibold text-white",children:t(n.user?.name)})}),e.jsxs("div",{className:"hidden sm:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:n.user?.name}),e.jsx("p",{className:"text-xs text-text-secondary capitalize",children:n.user?.role})]}),e.jsx("svg",{className:"w-4 h-4 text-text-secondary hidden sm:block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),width:"w-56",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-border",children:[e.jsx("p",{className:"text-sm font-medium text-text-primary",children:n.user?.name}),e.jsxs("p",{className:"text-xs text-text-secondary",children:["@",n.user?.username]})]}),e.jsx(c,{href:"/password",className:"block",children:e.jsx(m,{children:e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Change Password"]})})}),e.jsx(g,{}),e.jsx(m,{onClick:s,danger:!0,children:e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign out"]})})]})})]})})}function k({children:i,title:n}){const{flash:s}=x().props,[t,a]=d.useState(null);return d.useEffect(()=>{if(s?.success?a({type:"success",message:s.success}):s?.error&&a({type:"error",message:s.error}),t){const o=setTimeout(()=>a(null),5e3);return()=>clearTimeout(o)}},[s]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(f,{}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx(v,{title:n}),e.jsx("main",{className:"p-6",children:i})]}),t&&e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsxs("div",{className:`px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 ${t.type==="success"?"bg-success text-white":"bg-error text-white"}`,children:[t.type==="success"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{children:t.message}),e.jsx("button",{onClick:()=>a(null),className:"ml-2 hover:opacity-80",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})}export{k as A};
