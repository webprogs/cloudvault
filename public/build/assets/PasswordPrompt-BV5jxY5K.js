import{r as t,j as e,H as b}from"./app-BkR4kAKC.js";import{B as x}from"./Button-CHU0Urfk.js";function k({token:n,fileName:m}){const[o,h]=t.useState(""),[i,d]=t.useState(""),[u,l]=t.useState(!1),[p,f]=t.useState(!1),[a,j]=t.useState(null),v=async r=>{r.preventDefault(),l(!0),d("");try{const s=await fetch(`/share/${n}/verify`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({password:o})}),c=await s.json();if(!s.ok)throw new Error(c.message||"Verification failed");f(!0),j(c.file)}catch(s){d(s.message)}finally{l(!1)}},w=()=>{window.location.href=`/share/${n}/download?password=${encodeURIComponent(o)}`},y=r=>{const s={image:e.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),video:e.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),document:e.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),file:e.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})};return s[r]||s.file};return e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"Protected File"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-primary/10 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-primary rounded-2xl flex items-center justify-center shadow-lg shadow-primary/25",children:e.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("span",{className:"text-2xl font-bold text-primary-dark",children:"Gray Media"})]}),e.jsx("div",{className:"bg-card rounded-2xl shadow-xl shadow-black/5 border border-border overflow-hidden",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-border text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-2xl flex items-center justify-center mx-auto mb-4 text-success",children:y(a?.icon_type)}),e.jsx("h1",{className:"text-xl font-semibold text-text-primary",children:"Ready to Download"}),e.jsx("p",{className:"text-text-secondary mt-2",children:"Password verified successfully"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-text-primary",children:a?.name}),e.jsx("p",{className:"text-sm text-text-secondary",children:a?.formatted_size})]}),e.jsx("span",{className:"px-3 py-1 bg-gray-200 rounded-lg text-xs font-medium text-text-secondary uppercase",children:a?.extension})]})}),e.jsxs(x,{onClick:w,className:"w-full",size:"lg",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download File"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-border text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-light rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-text-primary",children:"Password Protected"}),e.jsx("p",{className:"text-text-secondary mt-2",children:"This file requires a password to access"})]}),e.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary mb-1",children:"File name"}),e.jsx("p",{className:"font-medium text-text-primary truncate",children:m})]}),i&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl text-sm text-error",children:i}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Enter Password"}),e.jsx("input",{type:"password",value:o,onChange:r=>h(r.target.value),className:"w-full px-4 py-3 border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary transition-all",placeholder:"Enter the share password",autoFocus:!0,required:!0})]}),e.jsx(x,{type:"submit",className:"w-full",size:"lg",loading:u,children:"Verify Password"})]})]})}),e.jsx("p",{className:"text-center text-sm text-text-secondary mt-6",children:"Shared via Gray Media"})]})})]})}export{k as default};
