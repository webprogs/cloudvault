import{r as c,j as e,H as y,L as x,a as j}from"./app-BkR4kAKC.js";import{A as f}from"./AppLayout-DU10v_Wh.js";import{B as o}from"./Button-CHU0Urfk.js";import{M as g}from"./Modal-CXHsxJWj.js";function b({shares:r}){const[s,a]=c.useState({open:!1,share:null}),[m,n]=c.useState(null),h=async(t,l)=>{try{await navigator.clipboard.writeText(t),n(l),setTimeout(()=>n(null),2e3)}catch{const i=document.createElement("textarea");i.value=t,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),n(l),setTimeout(()=>n(null),2e3)}},p=async()=>{if(s.share)try{await fetch(`/shares/${s.share.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}),j.reload()}catch(t){console.error("Failed to revoke share:",t)}finally{a({open:!1,share:null})}},d=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",u=t=>t.is_active?t.is_expired?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-600",children:"Expired"}):t.is_download_limit_reached?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-600",children:"Limit Reached"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-600",children:"Active"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600",children:"Revoked"});return e.jsxs(f,{title:"Shared Files",children:[e.jsx(y,{title:"Shared Files"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Your Shared Links"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Manage all your shared file links"})]})}),r.data.length===0?e.jsxs("div",{className:"bg-card border border-border rounded-2xl p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),e.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"No shared links yet"}),e.jsx("p",{className:"text-text-secondary mb-6",children:"Share files from your file manager to create links"}),e.jsx(x,{href:"/files",children:e.jsx(o,{children:"Go to Files"})})]}):e.jsxs("div",{className:"bg-card border border-border rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"File"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Downloads"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Expires"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-text-secondary uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:r.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-light flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium text-text-primary truncate",children:t.file?.name||"Deleted file"}),e.jsx("p",{className:"text-xs text-text-secondary truncate",children:t.share_url})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center gap-2",children:t.share_type==="password"?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("span",{className:"text-sm text-text-primary",children:"Password"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm text-text-primary",children:"Public"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u(t)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-primary",children:[t.access_count,t.max_downloads&&e.jsxs("span",{className:"text-text-secondary",children:[" / ",t.max_downloads]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-secondary",children:d(t.expires_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-secondary",children:d(t.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>h(t.share_url,t.id),className:"p-2 rounded-lg text-text-secondary hover:bg-gray-100 transition-colors",title:"Copy link",children:m===t.id?e.jsx("svg",{className:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("button",{onClick:()=>a({open:!0,share:t}),className:"p-2 rounded-lg text-error hover:bg-red-50 transition-colors",title:"Revoke share",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},t.id))})]})}),r.last_page>1&&e.jsx("div",{className:"px-6 py-4 border-t border-border flex justify-center gap-2",children:r.links.map((t,l)=>e.jsx(x,{href:t.url||"#",className:`px-3 py-1 rounded-lg ${t.active?"bg-primary text-white":t.url?"bg-gray-100 text-text-secondary hover:bg-gray-200":"bg-gray-50 text-gray-300 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},l))})]})]}),e.jsx(g,{isOpen:s.open,onClose:()=>a({open:!1,share:null}),title:"Revoke Share Link",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-text-secondary",children:"Are you sure you want to revoke this share link? Anyone with this link will no longer be able to access the file."}),s.share&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"font-medium text-text-primary truncate",children:s.share.file?.name}),e.jsx("p",{className:"text-sm text-text-secondary truncate mt-1",children:s.share.share_url})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(o,{variant:"ghost",onClick:()=>a({open:!1,share:null}),children:"Cancel"}),e.jsx(o,{variant:"danger",onClick:p,children:"Revoke Link"})]})]})})]})}export{b as default};
